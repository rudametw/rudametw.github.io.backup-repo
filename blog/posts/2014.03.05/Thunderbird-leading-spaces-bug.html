<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- <meta name="description" content="Walter Rudametkin's home page, contact, blog and photos"> -->
<meta name="author" content="Walter Rudametkin">
<link rel="author" href="https://plus.google.com/+WalterRudametkin" />

<title>Thunderbird leading spaces disappear when using wrong character set</title>
&nbsp;

<!-- Add custom CSS here -->
<link rel="stylesheet" href="/assets/main-bc4aef21bc1098bc01156e0e7c8f482f.css">

<link rel="shortcut icon" href="favicon.ico" />

</head>

<body>

    	<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
					<span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
				</button>
                <!-- <a class="navbar-brand" href="http://rudametkin.tk">Rudametkin.tk</a> -->
                <a class="navbar-brand" href="/">walter.rudametkin</a>
			</div>

			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse navbar-right navbar-ex1-collapse">
				<ul class="nav navbar-nav">
                    <li><a href="/">Home</a></li>
					<li><a href="/publications/">Publications</a></li>
					<li><a href="/teaching/">Teaching</a></li>
                    <li><a href="/research/">Research</a></li>
                    <li><a href="/blog/">Blog</a></li>
                    <li><a href="/photos/">Photos</a></li>
                    <li><a href="/contact/">Contact</a></li>
				</ul>
			</div>
			<!-- /.navbar-collapse -->
		</div>
		<!-- /.container -->
	</nav>


    <div class="container">
        <div class="row">
            <div class="col-md-8">
                               <!-- the actual blog post: title/author/date/content -->
                <h1> Thunderbird leading spaces disappear when using wrong character set </h1>
                    <p class="lead">by <a href="/contact/">Walter Rudametkin</a> &nbsp;&nbsp;&nbsp;
    
                    
                        <a href="/blog/categories/thunderbird/"><span class="label label-primary">thunderbird</span>
                        </a>
                        <!-- </button> -->
                    
                        <a href="/blog/categories/bug/"><span class="label label-primary">bug</span>
                        </a>
                        <!-- </button> -->
                    
                    </p>
                        <span class="glyphicon glyphicon-time"></span> Posted 2014.03.05 
                        
                            &mdash; Rennes, France
                        

                <hr>
                
                <p>I ran into a weird bug that took me about 50 test emails to understand. Thunderbird appears to automatically convert your plain-text emails from one character set to another automatically if it detects that there is an incompatible character.</p>

<p>However, the conversion isn&#39;t as smooth as it should be. In fact, in my case, all leading spaces in my neatly formatted plain-text format=flowed emails disappear.</p>

<!--more-->

<p>Let&#39;s try an example. Send an email with a couple of lines and a single &quot;weird&quot; character, like this one:</p>

<div class="highlight"><pre><code class="bash">    This line has four leading spaces
   This line has three leading spaces
          This line has ten leading spaces

’ This is a stupid right-single-quotation-mark character <span class="o">(</span>u+2019<span class="o">)</span>
</code></pre></div>

<p>And what do we get when we send it?</p>

<div class="highlight"><pre><code class="bash">Return-Path: walter.rudametkin@inria.fr
<span class="o">[</span>...<span class="o">]</span>
Message-ID: &lt;531727D5.7000209@inria.fr&gt;
Date: Wed, 05 Mar 2014 14:34:13 +0100
From: Walter Rudametkin &lt;walter.rudametkin@inria.fr&gt;
Organization: INRIA
User-Agent: blabla
MIME-Version: 1.0
To: undisclosed-recipients:<span class="p">;</span>
Content-Type: text/plain<span class="p">;</span> <span class="nv">charset</span><span class="o">=</span>windows-1252<span class="p">;</span> <span class="nv">format</span><span class="o">=</span>flowed
Content-Transfer-Encoding: 8bit

This line has four leading spaces
This line has three leading spaces
This line has ten leading spaces

’ This is a stupid right-single-quotation-mark character <span class="o">(</span>u+2019<span class="o">)</span>
</code></pre></div>

<p>Damn, where are my spaces?</p>

<h2>What&#39;s going on?</h2>

<p>My charset in Thunderbird was configured to <code>ISO-8859-1</code>, which appears to still be the default. Thunderbird doesn&#39;t appear to be willing to change to UTF-8 as a default either, as can be seen by the WONTFIX in this <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=224391">bug</a>.</p>

<p>Behind the scenes Thunderbird sees the &quot;weird&quot; character and changes the character set to a compatible one when sending the email. </p>

<p>This can be seen in my &#39;Content-Type&#39; header which becomes this:</p>

<div class="highlight"><pre><code class="bash"><span class="lineno">1</span> Content-Type: text/plain<span class="p">;</span> <span class="nv">charset</span><span class="o">=</span>windows-1252<span class="p">;</span> <span class="nv">format</span><span class="o">=</span>flowed
</code></pre></div>

<p>As you can see, the charset is now changed to &#39;windows-1252&#39; (instead of the default &#39;ISO-8859-1&#39;), but my spaces are also gone!!!</p>

<p>Furthermore, if you use utf-8 characters like ←→⇐⇒⇑⇓⇙⇗⇖⇘⇙, which I conveniently have my keyboard setup to use, your email will be converted to &#39;charset=UTF-8&#39;, and you still lose your leading spaces.</p>

<h2>Solution</h2>

<p>My solution is to simply set Thunderbird to always use &#39;UTF-8&#39;. In Thunderbird this is pretty simple, go to:
<code>Edit→Preferences→Display→Advanced</code> And change outgoing and incoming mails.</p>

<h2>Mozilla bug</h2>

<p>If anybody is intested, I filed a bug for this problem <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=979857">https://bugzilla.mozilla.org/show_bug.cgi?id=979857</a></p>


                
                <!-- the comment box -->
<!--                 <div class="well">
                    <h4>Leave a Comment:</h4>
                    <form role="form">
                        <div class="form-group">
                            <textarea class="form-control" rows="3"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </form>
                </div> -->

                <!-- the comments -->
<!--                 <hr>
 --><!--                 <h3>Start Bootstrap
                    <small>9:41 PM on August 24, 2013</small>
                </h3>
                <p>This has to be the worst blog post I have ever read. It simply makes no sense. You start off by talking about space or something, then you randomly start babbling about cupcakes, and you end off with random fish names.</p>

                <h3>Start Bootstrap
                    <small>9:47 PM on August 24, 2013</small>
                </h3>
                <p>Don't listen to this guy, any blog with the categories 'dinosaurs, spaceships, fried foods, wild animals, alien abductions, business casual, robots, and fireworks' has true potential.</p> -->

<!--             <div class="row"> -->
<!--                 % include well.html %} -->
<!--             </div> -->

<!--             </div> -->
<!--             % include well.html %} -->
            
            </div>
            <div class="col-md-4">
                <!-- <div class="col-md-4"> -->
    <!--              
    <div class="well">
        <h4>Blog Search</h4>
        <div class="input-group">
            <input type="text" class="form-control">
            <span class="input-group-btn">
                <button class="btn btn-default" type="button">
                    <span class="glyphicon glyphicon-search"></span>
                </button>
            </span>
        </div>
    </div>
    -->

    

    <div class="well">
        <div class="row">
            <div class="col-md-6">
                <h4>Current Tags</h4>
                <ul class="list-unstyled">
                    
                    <li><a href="/blog/categories/thunderbird/">thunderbird</a></li> 
                    <li><a href="/blog/categories/bug/">bug</a></li> 
                </ul>
            </div>
        </div>
    </div>

    

    <div class="well">
        <div class="row">
            <div class="col-lg-6">
                <h4>All Tags</h4>
                <ul class="list-unstyled">
                    <li><a href="/blog/">All</a></li> 
                    <li><a href="/blog/categories/linux/">linux</a></li> 
                    <li><a href="/blog/categories/nslu2/">nslu2</a></li> 
                    <li><a href="/blog/categories/work-in-progress/">work-in-progress</a></li> 
                    <li><a href="/blog/categories/webdav/">webdav</a></li> 
                    <li><a href="/blog/categories/cloud/">cloud</a></li> 
                    <li><a href="/blog/categories/first-post/">first-post</a></li> 
                    <li><a href="/blog/categories/jekyll/">jekyll</a></li> 
                    <li><a href="/blog/categories/github-pages/">github-pages</a></li> 
                    <li><a href="/blog/categories/markdown/">markdown</a></li> 
                    <li><a href="/blog/categories/untidy/">untidy</a></li> 
                    <li><a href="/blog/categories/thunderbird/">thunderbird</a></li> 
                    <li><a href="/blog/categories/bug/">bug</a></li> 
                </ul>
            </div>
        </div>
    </div>

    <div class="well">
        <h4>'Tis me blog matie</h4>
        <p>Sorry, no comments enabled for now because I'm using a simple static site generator (maybe I'll try out disqus another day).</p>
        <p>
            But if you like what you see, send me an <a href="/contact/">email</a>.
        </p>
    </div>
<!-- </div> -->

            </div>
        </div>
    </div>

    <hr>

    <div class="banner">
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                <!--                     <h2>You can check me out on</h2> -->
                <h2>Find me on</h2>
            </div>
            <div class="col-lg-9">
                <ul class="list-inline banner-social-buttons">
                    <li><a href="http://www.linkedin.com/in/rudametkin" class="btn btn-default btn-lg"><i class="fa fa-linkedin-square fa-fw"></i>
                            <span class="network-name">Linkedin</span></a></li>
                    <li><a href="https://github.com/rudametw" class="btn btn-default btn-lg"><i class="fa fa-github-square fa-fw"></i> <span
                            class="network-name">Github</span></a></li>
                    <li><a href="http://scholar.google.fr/citations?user=vJQGm9kAAAAJ&amp;hl=en" class="btn btn-default btn-lg"><i
                            class="fa fa-search fa-fw"></i> <span class="network-name">Scholar</span></a></li>
                    <li><a href="https://www.google.com/+WalterRudametkin?rel=author" class="btn btn-default btn-lg"><i
                            class="fa fa-google-plus-square fa-fw"></i> <span class="network-name">google+</span></a></li>
                    <li><a href="http://walterrudametkin.brandyourself.com/" class="btn btn-default btn-lg"><i
                            class="fa fa-share-square fa-fw"></i> <span class="network-name">brandyourself</span></a></li>
                </ul>
            </div>
        </div>
    </div>
    <!-- /.container -->

</div>
<!-- /.banner -->

<footer>
    <div class="container">
        <div class="span12 pagination-centered" style="text-align: center">
            <div class="row">
                <div class="col-lg-12">
                    <ul class="list-inline">
                        <li><a href="/">Home</a></li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <!-- 						<li><a href="#about">About</a></li>
							<li class="footer-menu-divider">&sdot;</li>
	 -->
                        <li><a href="/publications/">Publications</a></li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li><a href="/teaching/">Teaching</a></li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li><a href="/research/">Research</a></li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li><a href="/blog/">Blog</a></li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li><a href="/photos/">Photos</a></li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li><a href="/contact/">Contact</a></li>
                    </ul>

                    <p class="copyright text-muted small">
                        <a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-html401"
                            alt="Valid HTML 4.01 Frameset" height="20" width="57"></a> Built using <a href="http://jekyllrb.com/">Jekyll</a>, <a
                            href="http://twitter.github.com/bootstrap/">Bootstrap</a> and <a href="http://startbootstrap.com">Startbootstrap</a>. All
                        source code available <a href="https://github.com/rudametw/rudametw.github.io"> here</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- Main Javascript -->
<script src="/assets/main-be649ed6d8c86866b80bfd8f4166ae92.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48705379-1', 'rudametw.github.io');
  ga('send', 'pageview');
</script>

</body>
</html>